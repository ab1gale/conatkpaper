\section{Introduction} \label{sec:intro}


%1. Interleaving - crash - explicit behaviour - 
Multi-threaded program is hard to be correct. 
Concurrency bugs are common in modern multi-threaded programs  
including atomic violation, order violation, and data race\cite{lu:concurrency-bugs,conmem:asplos10,conseq:asplos11, lu:muvi:sosp}.
Extant work well explores interleaving that causes concurrency bugs, 
and efficiently detects explicit concurrency bugs that direct to  
severe consequences such as execution order violation, wrong output and program crash
\cite{wu2015:collaborative,tsan,valgrind:pldi,lu:muvi:sosp,conseq:asplos11,conmem:asplos10}.
%and by employing memory sanitizers and thread sanitizers, severe concurrency bugs
%may be explicit(?..).

%2. Recent study - con attacks - structural , consequence, [in-explicit severer]
Recent studies\cite{acidrain:sigmod17,con:hotpar12} show rise of concerns about \emph{concurrency attacks}.
By triggering concurrency bugs, 
hackers may leverage the corrupted memory to conduct  
attacks including privilege escalations\cite{uselib-bug-12791,mysql-bug-14747}, hijacking code execution\cite{msiexploit}, bypassing security checks\cite{cve-2008-0034,cve-2010-0923,cve-2010-1754}, 
and breaking database integrity\cite{acidrain:sigmod17}.
These vulnerabilities are often hidden in concurrency bugs and implicit regarding program behaviors. 
For example, a privilege escalation attack may cause no outrageous effect, 
but possess a permanent security hole hiding in the system.
Also, despite the subtle inputs that induce concurrency bugs, 
concurrency attacks may need other crafted inputs for exploitation of the vulnerabilities. 



%3. Unfortunately, most extant work -- detect bug, corruption 
%   Our study - old bug - attack
%   However in danger
%   Sigmod 
Unfortunately, although great progress has been made, there does not exist a general model and practical tools  
for understanding and detecting concurrency attacks.
???Our study over known concurrency 
bugs\cite{apache-bug-25520, apache-bug-46215} shows that 
even concurrency bugs have been successfully detected and reported, 
professionals may still lack knowledge about how severe consequences these bugs may cause. 
???For instance, \emph{apache-25520}\cite{apache-bug-25520} has been 
reported over years and well studied by researchers\cite{lu:concurrency-bugs}.  
???We are the first to exploit a new heap overflow attack leveraging on this bug and break the HTML integrity. 
Knowledge and detection of concurrency attacks is of crucial importance. 

%4. Two major challenges : 
%a. concurrent bug detectors (justify) 
%b. other input for attack
We studied \nattacks attacks and find two major challenges for detecting concurrency attacks. 
First, concurrency attacks may be implicit and hidden in common concurrency bugs. 
Existing concurrent bug detectors may not 
analyze whether a concurrency bug is vulnerable and exploitable.  
%ConMem\cite{conmem:asplos10} first propose to 
%consider concurrency bugs that may cause severe consequences (\eg program crash), 
%but our observation shows that explicit error (\eg program crash) is not necessary for concurrency 
%attacks.
%ConSeq\cite{conseq:asplos11} care about severe consequences and do intra-procedure analysis to help diagnose concurrency bugs. 
%However, propagation path ... .
%Here the propagation path?
%
%Worse still, crash bugs may even lead to more severe vulnerabilities. 
%In \emph{CVE-2017-7533} conducted by our team, although the data race primarily causes kernel crash, 
%we crafted the input and successfully conduct a privilege escalation attack without crashing the kernel.
%Current concurrency bug detecting tools are not designed to analyze this kind of latent vulnerabilities, 
%and hence may direct wrong level of warnings towards the bugs.  


Second, extant work ignores indicating extra inputs to conduct concurrency attacks.
A concurrency bug may become much more vulnerable when attackers 1.craft inputs that trigger the bug; 
2.employee another input running on victim threads to construct their attacks. 
In CVE-2017-7533, we do not only leverage two crafted inputs running on two threads to trigger a data race and construct kernel heap overflow, 
but also require another inputs running on \emph{victim thread} to lay the target structure on the same heap. 
By corrupting the target structure, we finally achieve arbitrary code execution and get a root shell. 
Automatically indicating the inputs that construct concurrency attacks 
would be of vital helpful for developers to better understand the latent vulnerabilities.
%For example, in the Apache-25520 case, after knowing about information of victim thread, 
%we successfully increased the severity of the bug and conducted an integrity violation.

%5. New model for general attacks [] -- *vulnerability window 

To address the two challenges, we present a general model(\S\ref{sec:model}) 
for understanding concurrency attacks.
The model breaks down concurrency attacks into three stages: bug happening, 
bug-to-attack propagation, and attack happening. In this model, 
a concurrency bugs is triggered by bug-induced inputs and one input 



%6. Leveraging this model, framework - address two challenges.
Leveraging this model, we designed a practical, scalable and inter-procedural concurrency 
attack detection framework(\S\ref{sec:archi}), \xxx. 
The framework contain two phases.
%7. Two phase. 
The first phase is \emph{concurrency analyzer} to analyze bug-to-attack propagations. 
We easily employ existing race detectors, and design a benign schedule reducer to reduce race reports(\S\ref{label}). 
Then we 

The second phase is \emph{concurrency fuzzer?} to indicate extra inputs for constructing a concurrency attack. 


%9. Implementation / CVE . reduction
We implemented \xxx on Linux, supporting both user space and kernel space attack detection. 



We evaluated OWL on 6 diverse, widely used programs, including Apache, Chrome, Libsafe, Linux kernel, MySQL,
and SSDB. OWL’s benign schedule hints and runtime verifiers reduced 94.3\% of the race reports, 
and it did not miss the evaluated concurrency attacks. With the greatly reduced reports,
OWL’s vulnerable input hints helped us identify subtle
vulnerable inputs, leading to the detection of 7 known concurrency
attacks as well as 3 previous unknown, severe ones
in SSDB and Apache. The analysis performance of OWL was
reasonable for in-house testing.


%10. Contribution
%     new model/ system / General -extension- .. new CVE..
This paper makes two major contributions:

\begin{tightenum}
\item \textbf{A general model for understanding concurrency attacks.} 
This model explains most concurrency attacks in wild and 
providing two major direction for detecting concurrency attacks. 
	
\item \textbf{A practical concurrency attack detection tool and its implementation, \xxx.} 
\xxx can easily employ existing concurrent bug detectors and vulnerability analyzer 
to improve the accuracy and ??? of detection.
	
\end{tightenum}

 

%11. The rest of section
The rest of this paper is structured as follows. 
\S\ref{sec:background} introduces the background of concurrency attacks.
\S\ref{sec:overview} gives an overview on the concurrency attack model and architecture of \xxx.
\S\ref{}...





